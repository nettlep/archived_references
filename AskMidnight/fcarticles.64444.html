<html>
<head><title>flipcode - Presenting A Memory Manager</title>
<style type="text/css">


a.menulink:link    {color: #b9ffd0; }
a.menulink:visited {color: #b9ffd0; }
a.menulink:active  {color: #b9ffd0; }

a.menulinkempty:link    {color: #b9ffd0; }
a.menulinkempty:visited {color: #b9ffd0; }
a.menulinkempty:active  {color: #b9ffd0; }
a.menulinkempty:link, a.menulinkempty:visited, a.menulinkempty:active {text-decoration: none}

a.orangelink:link    { color:#FFAB04; }
a.orangelink:visited { color:#FFAB04; }
a.orangelink:active  { color:#FFAB04; }

a.palegreen:link    {color: #b9ffd0; }
a.palegreen:visited {color: #b9ffd0; }
a.palegreen:active  {color: #b9ffd0; }

a.bluelink:link    { color:#03F0FF; }
a.bluelink:visited { color:#03F0FF; }
a.bluelink:active  { color:#03F0FF; }

a.softyellow:link     { color:#FFFCA9; }
a.softyellow:visited  { color:#FFFCA9; }
a.softyellow:active   { color:#FFFCA9; }

a.nounderline:link        {color: #FFFCA9; }
a.nounderline:visited     {color: #FFFCA9; }
a.nounderline:active      {color: #FFFCA9; }
a.nounderline:link, a.nounderline:visited, a.nounderline:active {text-decoration: none}

<!--
#code_comment { font-family:Courier,Courier New; font-size:12px; color:#007f00; }
#code_text    { font-family:Courier,Courier New; font-size:12px; color:#000000; }
#code_keyword { font-family:Courier,Courier New; font-size:12px; color:#0000FF; }
-->

</style>
</head>
<body bgcolor="#000000" text="#ffffff" link="#FFFCA9" vlink="#FFFCA9" alink="#FFFCA9">

<center>

<table cellspacing=0 cellpadding=0 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center"><font size=1>&nbsp;</font></td>
</tr>
</table>

<table width="100%" cellspacing=12 cellpadding=0 border=0><tr>
<td width="49%" bgcolor="#000000" valign="center"><a href="deadend.html"><img border=0 src="fcc.png"></a></td>
<td width="49%" bgcolor="#000000" valign="center" align="right">
</td>
</tr>
</table>


</td></tr></table>

<table cellspacing=0 cellpadding=0 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center"><font size=1>&nbsp;</font></td>
</tr>
</table>


<table width="100%" cellspacing=0 cellpadding=0 border=0><tr>
<td width="160" bgcolor="#303030" valign="top">



<img src="rm-stilt.gif"></td>


<td width="100%" bgcolor="#000000" valign="top">
<font face="Tahoma, Helvetica, Verdana" size=1>

<font face="Verdana,Helvetica" color="#ffffff" size=2><br>
<br>
<center>
<table width="94%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td>
<font size=3 face="Verdana, Helvetica" color="#ffffff"><b>Presenting A Memory Manager</b><br>
<font size=2>Question submitted by <a href="mailto:n/a">n/a</a> (12 September 2000)</font><br>
<font size=1><br><img src="line_grey.png"><br><br></font><br>
</font>

</td></tr></table>
</center><center>
<table width="98%" border=0 cellspacing=0 cellpadding=0>
<tr>
<td><img src="bborder_topleft.png"></td>
<td width="100%" background="bborder_topmiddle.png">&nbsp;</td>
<td><img src="bborder_topright.png"></td>
</tr>
<tr>
<td background="bborder_left.png">&nbsp;</td>
<td width="100%">
<font face="Verdana,Helvetica" color="#ffffcc" size=2>

        <font size=1><i>
This entry is not a response to a question.</i></font>
</font>

</td>
<td background="bborder_right.png">&nbsp;</td>
</tr>
<tr>
<td><img src="bborder_botleft.png"></td>
<td width="100%" background="bborder_botmiddle.png">&nbsp;</td>
<td><img src="bborder_botright.png"></td>
</tr>
</table>
<br>
<center>

<center>
<table width="98%" border=0 cellspacing=0 cellpadding=0>
<tr>
<td><img src="bborder_topleft-a.png"></td>
<td width="100%" background="bborder_topmiddle.png">&nbsp;</td>
<td><img src="bborder_topright.png"></td>
</tr>
<tr>
<td background="bborder_left.png">&nbsp;</td>
<td width="100%">
<font face="Verdana,Helvetica" color="#BFFFE5" size=2>
This installment of the Ask Midnight column is not in response to a question,
but rather a follow-up to the last question about memory management & tracking.
I've spent the past week developing and testing a new industrial-grade memory
manager.<br><br>During this effort, I found three bugs in an application I thought to be
bug-free (at least, as far as memory usage goes.) I had this confidence because
I often run with BoundsChecker (as well as the memory tracking tools in the
Microsoft libraries.) Neither of these tools was able to locate these particular
bugs, so I assumed the bugs didn't actually exist. As it turns out, the memory
manager presented here located them and told me exactly where to go to fix them.
As a result, I now have a little more confidence in the application I was
testing with, and even more confidence in my memory tracker.  Here's what this
memory tracker told me:
<blockquote>
<li>I was never deallocating the frame buffer. Sounds simple but the fact is,
neither BoundsChecker nor Microsoft's memory tracking library noticed this
memory leak.<br><br><li>I noticed that there was over a MEG of unused RAM in the memory report. By
attaching a memory report dump to a key, I was able to see a snapshot of what
memory was in use (every single allocation) and noticed that a particular block
of allocated RAM contained a large amount of unused RAM within it. Going to the
line in the source where the allocation took place, I found that I was
allocating a z-buffer from legacy code and had forgot to remove the allocation
when I removed the rest of the z-buffer code.<br><br><li>When the application started up, the window would be bright green prior
rendering the first frame. This was because the "unused memory" fill pattern
used by the memory manager translates to bright green. Looking at the source, I
found that I wasn't clearing the frame buffer after the allocation.
</blockquote>
Is your code bug-free? Take the Memory Manager challenge! I urge you to include
this software in your projects as a test. If your projects have any size to them
at all, or use memory in a multitude of various ways, then this memory tracker
may very likely find bugs in your code that you never knew were there.
Just include this software with your project, include the MMGR.H file in each of
your source files and recompile. After each run, check for any MEM*.LOG files in
the project's directory. If you really want to test your software, simply edit
MMGR.CPP and uncomment the STRESS_TEST macro. This will slow your allocations
down a bit, but it's worth it. And finally, spend a couple minutes and read the
comments at the top of the MMGR.CPP file.<br><br>If this code helps you find bugs you never knew existed or helps you track down
a tough bug, then <b>please</b> visit this issue of Ask Midnight and leave a
testimonial <a href="deadend.html?showThread=12September2000-PresentingAMemoryManager&forum=askmid&id=-1">in the comments</a>. I will periodically check them and may eventually
release an updated version of this software based on your comments.<br><br>Download The Memory Manager: <b>[<a href="ftp://ftp.flipcode.com/code/mmgr.zip">mmgr.zip</a> (15k)]</b><br><br>So go ahead. Take the challenge. I <I>dare</I> you. :)
<br>
<font size=1><br><img src="line_grey.png"><br><br></font>
<font color="#ffffff">Response provided by <b>Paul Nettle</b></font>
</font>
</td>
<td background="bborder_right.png">&nbsp;</td>
</tr>
<tr>
<td><img src="bborder_botleft.png"></td>
<td width="100%" background="bborder_botmiddle.png">&nbsp;</td>
<td><img src="bborder_botright.png"></td>
</tr>
</table><br>This article was originally an entry in flipCode's <i>Ask Midnight</i>, a Question and Answer column with Paul Nettle that's no longer active.
<center>

</td>



</tr>
</table>

<table cellspacing=0 cellpadding=0 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center"><font size=1>&nbsp;</font></td>
</tr>
</table>
</center>

<br>
<center><font face="Arial, Helvetica" size=1> </font></center>

<br><br>



<font face="Verdana,Helvetica" color="#ffffff" size=2><b>Community Feedback:</b><br><br></font><center>
<table cellspacing=0 cellpadding=0 border=0 width="100%">
<tr>
   <td width="100%" valign="center"><font face="Verdana" size=2></b><font size=1>Navigate: / <a class="menulink" href="deadend.html">flipcode</a> / <a class="menulink" href="deadend.html">Message Center</a> / <a class="menulink" href="deadend.html?thread_index=19">Question and Answer</a> / <a class="menulink" href="deadend.html?thread_show=23892">Presenting A Memory Manager</a><br><br><br></font></td>
</tr>
</table>
</center><center>
<a name="p193392">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Cool.  According to this, my current engine project isn't leaking any memory.   I guess you could say I "cheated" though because I already cleaned up my leaks using my own manager (not nearly as sophisticated as this one though).    But what's good for a few laughs is when I compile this manager through with some of my much older projects.   Umm, yikes ;]<br><br>Nice work, Paul...
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=1">Kurt Miller</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>12 Sep 2000, 1:28PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193392#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193392#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193392">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193393">
<a name="p193394">
<a name="p193395">
<a name="p193396">
<a name="p193397">
<a name="p193398">
<a name="p193399">
<a name="p193400">
<a name="p193401">
<a name="p193402">
<a name="p193403">
<a name="p193404">
<a name="p193405">
<a name="p193406">
<a name="p193407">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Gyar.  It breaks the STL string class (and probably other classes as well) in weird ways under Linux:<br><br><pre><br>g++ -I/usr/X11R6/include -O9 -funroll-loops -finline-functions -m486 -g -Wall -pg -c testRender3.cc<br>In file included from /usr/lib/gcc-lib/i386-linux/2.95.2/../../../../include/g++-3/string:6,<br>                 from Resman.h:10,<br>                 from testRender3.cc:17:<br>/usr/lib/gcc-lib/i386-linux/2.95.2/../../../../include/g++-3/std/bastring.h:112: parse error before `('<br>/usr/lib/gcc-lib/i386-linux/2.95.2/../../../../include/g++-3/std/bastring.h:112: `<invalid operator>' declared as an `inline' variable<br>/usr/lib/gcc-lib/i386-linux/2.95.2/../../../../include/g++-3/std/bastring.h:112: template declaration of `void * <invalid operator>'<br>/usr/lib/gcc-lib/i386-linux/2.95.2/../../../../include/g++-3/std/bastring.h:112: parse error before `?'<br>/usr/lib/gcc-lib/i386-linux/2.95.2/../../../../include/g++-3/std/bastring.h:113: parse error before `('<br>/usr/lib/gcc-lib/i386-linux/2.95.2/../../../../include/g++-3/std/bastring.h:113: variable or field `<invalid operator>' declared void<br>/usr/lib/gcc-lib/i386-linux/2.95.2/../../../../include/g++-3/std/bastring.h:113: ANSI C++ forbids in-class initialization of non-const static member `<invalid operator>'<br>/usr/lib/gcc-lib/i386-linux/2.95.2/../../../../include/g++-3/std/bastring.h:113: `<invalid operator>' declared as an `inline' field<br>/usr/lib/gcc-lib/i386-linux/2.95.2/../../../../include/g++-3/std/bastring.h:113: confused by earlier errors, bailing out<br>make: *** [testRender3.o] Error 1<br></pre><br><br>Somehow I have a feeling it'd have just said what I already know, though - my code's perfect. ;)  (That was a joke.)<br><br>Oh, and before you ask, yes, I'm using string in my low-level renderer.  My scenegraph uses a map<string, SceneNode *> as the hierarchal container - it keeps things nice and clean from a scene management perspective, and doesn't have that much overhead, really.  (It doesn't even show up as even remotely important, bottlenck-wise, using gprof...)
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=139">fluffy</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>12 Sep 2000, 2:18PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193393#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193393#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193393">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by fluffy</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-12-2000 - 02:18PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193394">Re: Presenting A Memory Manager</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-12-2000 - 03:00PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193395">Re: Presenting A Memory Manager</a> <font size=1>by fluffy</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-12-2000 - 07:06PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193396">Re: Presenting A Memory Manager</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-12-2000 - 08:36PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193397">Re: Presenting A Memory Manager</a> <font size=1>by fluffy</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-12-2000 - 09:34PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193398">Re: Presenting A Memory Manager</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-12-2000 - 10:39PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193399">Re: Presenting A Memory Manager</a> <font size=1>by fluffy</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 01:09AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193400">Re: Presenting A Memory Manager</a> <font size=1>by fluffy</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 01:14AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193401">Re: Presenting A Memory Manager</a> <font size=1>by fluffy</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 01:18AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193402">Re: Presenting A Memory Manager</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 01:21AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193403">Re: Presenting A Memory Manager</a> <font size=1>by fluffy</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 01:57AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193404">Re: Presenting A Memory Manager</a> <font size=1>by Firlionel</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>01-03-2002 - 01:34PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193405">Re: Presenting A Memory Manager</a> <font size=1>by Morgan</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>01-03-2002 - 05:46PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193406">Re: Presenting A Memory Manager</a> <font size=1>by Firlionel</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>01-03-2002 - 06:06PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193407">Re: Presenting A Memory Manager</a> <font size=1>by Pierre Phaneuf</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 09:52AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193408">
<a name="p193409">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    fluffy,<br>Make sure you #include "mmgr.h" AFTER all other .h files in your .cpp file.<br>ie: <br>#include "myLib.h"<br>#include <map><br>...<br>#include "mmgr.h"<br><br>#defining new causes numerous problems with STL (STLport at least).  In order to avoid this and other (MFC) problems, and so I can put something like mmgr.h in the main lib include, I've been doing basically this:<br><br>#define New ...<br>#define Delete ..<br>etc.<br><br>and using 'New' in my code.  If you're starting from scratch, this works very well.  Globally replacing new/delete/etc in a bunch of old code might not be as fun as simply adding the #include to each cpp file though.<br><br><br>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=62">Douglas Cox</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>12 Sep 2000, 2:35PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193408#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193408#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193408">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by Douglas Cox</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-12-2000 - 02:35PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193409">Re: Presenting A Memory Manager</a> <font size=1>by fluffy</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-12-2000 - 07:05PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193410">
<a name="p193411">
<a name="p193412">
<a name="p193413">
<a name="p193414">
<a name="p193415">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Hmmm, ive got good news and bad news for myself....<br><br>I linked your code in my project (built as a static lib, using Visual C++ 6 sp 4, on WinNT 4 sp4) and it reports that I have no memory leaks, wahoo!!!!  Now heres the problem....  now Boundschecker complains about the following mem leak:<br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br><font color="#007f00">// I know this isnt code, but what the hay... easier to read</font><br>Memory leak<br>144 bytes allocated by _malloc_dbg in onexit.c (104), HANDLE: 0x012C1440<br><br>Location of Error<br>_onexit	onexit.c	104<br></font><br></pre><br></td></tr><br></table><br><br>This is new behavour, I never used to have a leak... I set a break point on this line, and it is only called once, during the application load...  here is how the callstack looks during this call...<br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br>_onexit(<font color="#0000ff">int</font> (<font color="#0000ff">void</font>)* 0x0040107d [thunk]: std::ctype&lt;<font color="#0000ff">unsigned</font> <font color="#0000ff">short</font>>::id`template <font color="#0000ff">static</font> data member destructor helper') line 104<br><br>atexit(<font color="#0000ff">void</font> (<font color="#0000ff">void</font>)* 0x0040107d [thunk]: std::ctype&lt;<font color="#0000ff">unsigned</font> <font color="#0000ff">short</font>>::id`template <font color="#0000ff">static</font> data member destructor helper') line 141 + 9 bytes<br><br>$E20() line 467 + 13 bytes<br><br>$E24() + 13 bytes<br><br>_initterm(<font color="#0000ff">void</font> (<font color="#0000ff">void</font>)* * 0x00456174 $S25, <font color="#0000ff">void</font> (<font color="#0000ff">void</font>)* * 0x00456290 <br>___xc_z) line 525<br><br>_cinit() line 192 + 15 bytes<br><br>mainCRTStartup() line 205<br><br>KERNEL32! 77f1ba3c()<br></font><br></pre><br></td></tr><br></table><br><br><br>Any idea what the heck could be causing this leak to show up???  Now the oddest part, I cant seem to get rid of it... :(  Driving me nuts at this point!!!<br><br>I did make too very minor changes to the code though... I removed the #include "stdafx.h" (dont use PCH), and had to #include <stdarg.h> to get va_arg to work.<br><br>Any comments appreciated...<br>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=654">Serapth</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>12 Sep 2000, 3:49PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193410#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193410#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193410">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by Serapth</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-12-2000 - 03:49PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193411">Re: Presenting A Memory Manager</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-12-2000 - 09:29PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193412">Re: Presenting A Memory Manager</a> <font size=1>by Douglas Cox</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 01:03AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193413">Re: Presenting A Memory Manager</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 01:20AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193414">Re: Presenting A Memory Manager</a> <font size=1>by Serapth</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 02:10AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193415">Re: Presenting A Memory Manager</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 02:27AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193416">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp;<img src="comments_ball.gif"> &nbsp;<font size=2><b>Important! New version available...</b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Thanks to your comments, I've made some minor changes to the memory manager (no bug fixes tho, as there are no known bugs.)<br><br>So, grab the file again, it has been updated.<br><br>- <i><b>MidNight</b></i>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=81">MidNight</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>13 Sep 2000, 1:37AM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193416#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193416#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193416">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193417">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Oops.<br><br>(Make sure that your destructors are using mmgr.)<br><br>Sorry Paul. :)
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=139">fluffy</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>13 Sep 2000, 2:58AM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193417#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193417#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193417">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193418">
<a name="p193419">
<a name="p193420">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    By the way... (yes, I know I said I was going to bed, Paul, but this question is tugging at the corner of what little consciousness I have remaining):  what license is this under?  Public domain?  BSDish?  Obviously we're allowed to freely-use it in the development of our projects, but what about linkage into final products, commercial or otherwise?<br><br>To clear up some of the terminology (for those who don't know the various UNIX license holy wars): If it's basically "use it however you want" then that's BSDish.  If it's "use it however you want, but send me any changes to the sourcecode which are used in publically-available binaries," that's LGPL-ish.  The other major licenses aren't worth getting into for this purpose though. :)
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=139">fluffy</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>13 Sep 2000, 4:51AM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193418#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193418#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193418">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by fluffy</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 04:51AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193419">License</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 11:42AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193420">Re: License</a> <font size=1>by fluffy</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 11:58AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193421">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Yahoo! I don't have any leaks in my 3D engine (biggest project I've ever made).<br><br>BUT there are some leaks (33) in my octree (building), but I already knew that! :)<br>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=272">richard</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>13 Sep 2000, 7:18AM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193421#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193421#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193421">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193422">
<a name="p193423">
<a name="p193424">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Hi Paul !<br><br>First of all i have to say that this memory manager is a really good piece of software. Thank you for writing and posting it.<br><br>One question comes to my mind though... I tested several applications of mine with it , and discovered numerous memory related bugs. But my largest application gives me headaches (not my bugs, but how to use your memory manager with it)<br><br>It is a WIn32 game engine, which makes heavy use of DLLs.<br>Its organized in the following way:<br><br>game.exe ... game using the engine<br>kernel.dll ... kernel containing core and OS specific functionality<br>engine.dll ... game engine<br><br>numerous plugin Dlls..<br><br>The problem is i want to have one memory manager for all the modules which requires to put your mmgr in the kernel DLL (or else VC generated seperate stacks etc for every module if i link it statically.)<br>The problem is how to export the operators (new,delete) from the DLL ? <br>the normal way does not work since new and delete have a predefined linkage.. and inlining it (as i did with my old memory manager before i tried yours) first has the drawback that it can only trace memory errors in my own code, (and gives some compile errors in the preprocessor macros) <br><br>Is there a possiblity to put the manager in a DLL and am I missing something obvious ?<br><br>Thanks in advance<br><br><br>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=714">Gluber</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>13 Sep 2000, 8:22AM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193422#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193422#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193422">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by Gluber</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 08:22AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193423">Use in DLLs</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 01:00PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193424">Re: Use in DLLs</a> <font size=1>by psykotik</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-17-2000 - 12:07AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193425">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Final results for me:<br><br>All of the crashes were due to me having a destructor outside of the mmgr blanket.  It took, like, half an hour on the phone with Midnight to find this obvious-to-him problem. :)  None of the code crashes were the fault of my code.<br><br>I did have one uninitialized variable which led to a little bit of screwy (but non-fatal) behavior, which was easy to track down and fix and led me to cleaning up my OpenGL renderer's constructor anyway.<br><br>It reported a bunch of memory leaks which led me to finally get around to deallocating some objects on exit (since my code's in the early prototype stage I didn't think this was really necessary - it is).  After doing that I found out that I did, in fact, have a bona fide memory leak in my scenegraph manager - and it's one which would have been very non-obvious to figure out and would have caused much grief to figure out why and how, after 50 days of hardcore usage with lots of scene changes, there was a lot of unaccounted-for memory being allocated.  (I was forgetting to delete light objects.  Each light object is quite tiny - about 84 bytes, assuming promiscuous packing - so it'd have taken a while for this memory leak to be an issue.  But it's an actual memory leak, which I wouldn't have found otherwise.)<br><br>Most of my test and utility programs are completely memory-leak free.  Two of my half-assedly kludged renderer tests leave a buttload of stuff allocated on exit, but there's no clean way to clean it up and they're just tests of certain aspects of the renderer anyway, so I don't really care about those. :)<br><br>Overall, I think I did rather well. ;)  Even on my LOD stress test scene (which there was an IOTD of several weeks ago) with the memory manager stress test it worked with no faults or other problems (though it was slow, since stress-testing over 10,000 allocations is NOT fun).  Oh, and mmgr is quite nice, yes.  I will be using more of it, I think.
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=139">fluffy</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>13 Sep 2000, 12:09PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193425#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193425#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193425">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193426">
<a name="p193427">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp;<img src="comments_ball.gif"> &nbsp;<font size=2><b>You really should read this....</b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Include file dependencies are very important for getting the MMGR to integrate nicely into your application. I just spent an hour going through somebody's application that was experiencing some very strange problems, which appeared to be completely unrelated to #include file dependencies...<br><br>Here's the scoop:<br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br><font color="#0000ff">#include</font> &lt;stdio.h>   <font color="#007f00">// Standard includes MUST come first</font><br><font color="#0000ff">#include</font> &lt;stdlib.h>  <font color="#007f00">//</font><br><font color="#0000ff">#include</font> &lt;streamio>  <font color="#007f00">//</font><br><br><font color="#0000ff">#include</font> "mmgr.h"    <font color="#007f00">// mmgr.h MUST come next</font><br><br><font color="#0000ff">#include</font> "myfile1.h" <font color="#007f00">// Project includes MUST come last</font><br><font color="#0000ff">#include</font> "myfile2.h" <font color="#007f00">//</font><br><font color="#0000ff">#include</font> "myfile3.h" <font color="#007f00">//</font><br></font><br></pre><br></td></tr><br></table><br><br>Be careful if you're including standard includes from within your own project inclues; that will break this very specific dependency order.<br><br>- <i><b>MidNight</b></i>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=81">MidNight</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>13 Sep 2000, 2:23PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193426#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193426#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193426">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>You really should read this....</i></b> <font size=1>by MidNight</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 02:23PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193427">Re: You really should read this....</a> <font size=1>by Douglas Cox</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 03:54PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193428">
<a name="p193429">
<a name="p193430">
<a name="p193431">
<a name="p193432">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    I'm having a bit of problems converting your memory manager functions into a single instance class.  The basic conversion is working but I'm getting 2 reported "memory leaks" that were allocated internally (ie, not by me and were never allocated with the overloaded new function) but are aparently trying to be deallocated by the overloaded delete function.  Worked fine before I converted it to a class, so there is something I'm missing...<br><br>Anyways, I really just wanted to say Great Job MidNight! I've implemented a very basic memory manager previously (after reading your first post on memory managers), but this one is much more robust and VERY readable/understandable, unlike the other memory managers I've seen on the net.  Very impressive.
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=715">Robert Geiman</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>13 Sep 2000, 3:16PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193428#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193428#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193428">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by Robert Geiman</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 03:16PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193429">Converting it to a class?</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 03:42PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193430">Re: Converting it to a class?</a> <font size=1>by Serapth</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 03:47PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193431">Re: Converting it to a class?</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 04:01PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193432">Re: Converting it to a class?</a> <font size=1>by fluffy</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-13-2000 - 11:43PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193433">
<a name="p193434">
<a name="p193435">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    First of all, great tool! I haven't used it much, but already found irritating memory leaks ;) Though, these are four bugs (out of five) that I couldn't track down, basicly since I don't understnad where to look or how to find them.<br><br>cut.<br><br>   Addr       Size       Addr       Size                        BreakOn BreakOn              <br> Reported   Reported    Actual     Actual     Unused    Method  Dealloc Realloc Allocated by <br>---------- ---------- ---------- ---------- ---------- -------- ------- ------- <br>  00B918B0 0x00000004   00B918A0 0x00000024 0x00000000 new         N       N    ??(00000)::??<br>  00B91B30 0x00000018   00B91B20 0x00000038 0x00000008 new         N       N    ??(00000)::??<br>  00B86208 0x000005A0   00B861F8 0x000005C0 0x00000000 new         N       N    ??(00000)::??<br>  00B8EA98 0x00001000   00B8EA88 0x00001020 0x00000000 new         N       N    ??(00000)::??<br><br><br>Would be nice if someone could help me out or at least give me a hint.<br><br>It's a kind of GUI I'm making for our company. It's a dialog thingy :)<br><br>Thanks a lot<br>Albert
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=46">thec</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>14 Sep 2000, 2:32AM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193433#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193433#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193433">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by thec</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-14-2000 - 02:32AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193434">Re: Presenting A Memory Manager</a> <font size=1>by thec</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-14-2000 - 04:23AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193435">Tricks for tracking down memory leaks</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-14-2000 - 06:25AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193436">
<a name="p193437">
<a name="p193438">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Alright! I'm back! Sorry for the "spamming" but this one really bothers me... <br><br>I have a simple texture-class which stores images in RAM. Easy as that :) In the texture-class I have a resize-option, it looks like this (the marked line is there the memory manager marks an error) : <br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br><font color="#0000ff">void</font> Texture::resize(<font color="#0000ff">const</font> <font color="#0000ff">long</font> x, <font color="#0000ff">const</font> <font color="#0000ff">long</font> y) {<br>	<font color="#0000ff">if</font> ((<font color="#0000ff">this</font>->x == x) && (<font color="#0000ff">this</font>->y == y)) <font color="#0000ff">return</font>;<br><br>	<font color="#0000ff">if</font> (data!=NULL) <font color="#0000ff">delete</font>[] data;<br><br>	<font color="#0000ff">this</font>->x   = x;<br>	<font color="#0000ff">this</font>->y   = y;<br><br>	pixels = x*y;					<font color="#007f00">// Store the number of pixels that will be used</font><br>	dataSize=pixels&lt;&lt;2;				<font color="#007f00">// Store number of bytes that the buffer will use (pixels*4)</font><br><br>	<font color="#007f00">// ::::::::: MARKED LINE :::::::::</font><br>	data = <font color="#0000ff">new</font> dword[x*y];				<font color="#007f00">// Allocates the correct number of bytes.</font><br><br>	<font color="#0000ff">if</font> (data == NULL) <font color="#0000ff">throw</font> Exception("Texture::resize: Memory allocation failed.");<br><br>	clear();<br>}<br></font><br></pre><br></td></tr><br></table><br><br>I know, you think "doh!" he hasn't deallocated the data-block. Well, the destructor sais :<br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br>Texture::~Texture() {<br>	<font color="#0000ff">delete</font>[] data;<br>}<br></font><br></pre><br></td></tr><br></table><br><br>So what do you think are causing my problem?<br>Albert
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=46">thec</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>14 Sep 2000, 4:45AM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193436#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193436#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193436">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by thec</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-14-2000 - 04:45AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193437">Re: Presenting A Memory Manager</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-14-2000 - 06:43AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193438">Re: Presenting A Memory Manager</a> <font size=1>by thec</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-15-2000 - 03:07AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193439">
<a name="p193440">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    How do I get your memory manager to track mem when my class is defined as follows:<br><br>Header file:<br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br><font color="#0000ff">class</font> MyClass {<br>	<font color="#0000ff">public</font>:<br>		MyClass();<br>		<font color="#0000ff">virtual</font> ~MyClass();<br>		<font color="#0000ff">void</font> * <font color="#0000ff">operator</font> <font color="#0000ff">new</font> (<font color="#0000ff">unsigned</font> <font color="#0000ff">int</font> size);<br>		<font color="#0000ff">void</font> <font color="#0000ff">operator</font> <font color="#0000ff">delete</font>(<font color="#0000ff">void</font>* p);<br><br><font color="#007f00">// Disable the copy constructor and assignment by default so you will get</font><br><font color="#007f00">// compiler errors instead of unexpected behaviour if you pass objects</font><br><font color="#007f00">// by value or assign objects.</font><br>	<font color="#0000ff">private</font>:<br>		MyClass(<font color="#0000ff">const</font> MyClass& objectSrc);              <font color="#007f00">// no implementation</font><br>		<font color="#0000ff">void</font> operator=(<font color="#0000ff">const</font> MyClass& objectSrc);       <font color="#007f00">// no implementation</font><br>};<br></font><br></pre><br></td></tr><br></table><br><br>Body:<br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br>MyClass::MyClass()<br>{<br>}<br><br>MyClass::~MyClass()<br>{<br>}<br><br><font color="#0000ff">void</font> *<br>MyClass::<font color="#0000ff">operator</font> <font color="#0000ff">new</font> (<font color="#0000ff">unsigned</font> <font color="#0000ff">int</font> size)<br>{<br>	<font color="#0000ff">return</font> malloc(size);<br>}<br><br><font color="#0000ff">void</font><br>MyClass::<font color="#0000ff">operator</font> <font color="#0000ff">delete</font> (<font color="#0000ff">void</font>* p)<br>{<br>	free(p);<br>}<br></font><br></pre><br></td></tr><br></table><br><br><br>Also,  this is a stupid question, but for the strdup function, when I free the mem allocated from it,<br>I get an assert, I expected that.  So, what's the best way to handle this?  Should I #define strdup to call<br>malloc with strcpy, or what would you suggest?<br><br>Thanks for the help.  By the way, I've been working on my own memory manager we use here for our games.<br>I really liked your function that tracks unused memory, never even thought about tracking that statistic before!<br><br>- Mel<br>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=723">Mel</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>14 Sep 2000, 11:14AM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193439#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193439#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193439">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by Mel</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-14-2000 - 11:14AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193440">Re: Presenting A Memory Manager</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-14-2000 - 01:26PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193441">
<a name="p193442">
<a name="p193443">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp;<img src="comments_ball.gif"> &nbsp;<font size=2><b>A call for brains...</b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    As a few of you have raised the issue of "what happens when I want to override a local new/delete"? Douglas Cox's latest Tip Of The Day talks a little about this as well.<br><br>I've updated the current download to include a nommgr.h file, which removes the macros to allow you to do so. I've also rearranged the mmgr.h file a little to allow you to re-include it in order to simply re-enable the macros. Here's an example of how this might work.<br><br>Your header might contain:<br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br><font color="#0000ff">class</font> MyClass<br>{<br>   ...<br><br>   <font color="#0000ff">#include</font> "nommgr.h"       <font color="#007f00">// Remove the macros</font><br>   <font color="#0000ff">void</font> *<font color="#0000ff">operator</font> <font color="#0000ff">new</font>(...);<br>   <font color="#0000ff">#include</font> "mmgr.h"         <font color="#007f00">// Put the macros back</font><br><br>   ...<br>}<br></font><br></pre><br></td></tr><br></table><br><br>... and your CPP file might contain:<br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br><font color="#0000ff">#include</font> "nommgr.h"          <font color="#007f00">// Remove the macros</font><br><font color="#0000ff">void</font>  *MyClass::<font color="#0000ff">operator</font> <font color="#0000ff">new</font>(...)<br>{<br><font color="#0000ff">#include</font> "mmgr.h"            <font color="#007f00">// Put the macros back</font><br><br>   <font color="#007f00">// your code here</font><br>}<br></font><br></pre><br></td></tr><br></table><br><br>I'll admit that it doesn't get much uglier than this. But it does allow you to continue using the actual new/delete keywords within your source. This is especially important if your source is shared amongst many projects, or you simply have a lot of source and don't want to perform a global search & replace.<br><br>The real reason for the "call for brains" is to find a better solution. I was playing around with someting along the lines of:<br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br><font color="#0000ff">void</font>   *<font color="#0000ff">operator</font> _new(size_t size)<br>{<br>   ...<br>}<br></font><br></pre><br></td></tr><br></table><br><br>Note the underscore. This would require (yet another) macro, to replace <i>_new</i> with <i>new</i>. But it's not that simple. Since the C++ preprocessor reiterates through the macro replacements, we eventually end up with the same thing we stared with, a compiler error on the redefinition of operator new because the mmgr.h macros will still interfere. So I started playing around, and tried:<br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br><font color="#0000ff">#define</font> _new n##e##w<br></font><br></pre><br></td></tr><br></table><br><br>Which translates to <i>new</i>, and since that's what it translates to, it ends up being recursively macro-replaced again. I know there is a way (through recursive #defines) to do this, I've done it before (by accident), but I can't remember the key... any C++ gurus out there willing to give this a run?<br><br>- <b><i>MidNight</i></b>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=81">MidNight</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>14 Sep 2000, 5:50PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193441#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193441#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193441">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>A call for brains...</i></b> <font size=1>by MidNight</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-14-2000 - 05:50PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193442">Re: A call for brains...</a> <font size=1>by Douglas Cox</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-14-2000 - 06:48PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193443">Re: A call for brains...</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-14-2000 - 07:03PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193444">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp;<img src="comments_ball.gif"> &nbsp;<font size=2><b>New updates to MMGR.ZIP</b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    I received a few emails about MMGR, with some good suggestions.<br><br>First, Emmanuel Astier pointed out a bug in the m_breakOnRealloc() routine, in which an assert was backwards. This has been fixed.<br><br>Next, Fluffy pointed out an excellent idea: Random failures. Check the source near the top of mmgr.cpp to enable this.<br><br>- <i><b>MidNight</b></i>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=81">MidNight</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>16 Sep 2000, 1:36PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193444#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193444#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193444">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193445">
<a name="p193446">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Thanks a lot for posting this library Paul; I had been meaning to write something like this, so you saved me a bunch of work. I also extended it to cover the window allocation functions GlobalAlloc, GlobalRealloc, etc.. which I had in some older code. Using it I fixed up some leaks and now (for the moment) my code is leak free.<br><br>I found a bug in the wipeWithPattern function. But decided to download the latest version before saying anything and yep you had changed i from an unsigned int to an int in the alwaysWipeAll block. However this doesn't seem enough. if length is a negative number like -21. The second loop (with length & 0x3) will still write some pattern out. I fixed it by making the change: if (alwaysWipeAll && (allocUnit->reportedSize>originalReportedSize)).<br><br>I have also been trying to figure out a way to better report instances when you are allocating memory away from the function/object that's using it. For Example <br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br>Code block A:<br>{<br>  Mem=GetSomeMem();<br>}<br><br>Code block B:<br>PMEM GetSomeMem();<br>  {<br>     ... <br>     <font color="#0000ff">return</font> <font color="#0000ff">new</font> Mem;<br>  }<br></font><br></pre><br></td></tr><br></table><br><br>The allocation is done in code block B. but code block A is the one that is actually responsible for it. The leak shows up in Code block B, when what you really need to know is which code block called GetSomeMem. <br><br>I tried setting up something, where I put macro around GetSomeMem that would record who called it. (Same as Paul did with new, malloc etc..) Then using a special type of new in GetSomeMem that would use these values. It work for the case I needed it for however as a general solution it's got several problems. <br><br>Mainly: <br>Can't be used on object functions. (Big problem)<br>Macros can't handle initializers in function declarations. <br>You have to manually set up the blocks you want to test.<br><br>I am leaning to towards a debug setup where I set up macros up at the beginning and end of every function in my code. Something like:<br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br><font color="#0000ff">#define</font> M_ENDCODE<br><font color="#0000ff">#define</font> M_STARTCODE(X)<br><br><font color="#0000ff">#define</font> M_FS(X) X   			\<br>          {        		 	\<br>            M_STARTCODE(X)<br><br><br><font color="#0000ff">#define</font> M_FE M_ENDCODE  }<br><br><br><font color="#0000ff">#define</font> M_RETURN(X) { M_ENDCODE <font color="#0000ff">return</font> X; }<br><br><font color="#0000ff">#define</font> M_FER(X)  }<br><br>So a function like<br><br><font color="#0000ff">void</font> FooBar(<font color="#0000ff">int</font> X)<br>  {<br>    ... <br>  }<br>Becomes <br><br>M_FS(<font color="#0000ff">void</font> FooBar(<font color="#0000ff">int</font> X))<br>   ...<br>M_FE<br><br>And<br><br><font color="#0000ff">int</font> FooBar(<font color="#0000ff">int</font> X)<br>  {<br>     ...<br>  }<br>Becomes<br><br>M_FS(<font color="#0000ff">int</font> FooBar(<font color="#0000ff">int</font> X))<br>      ...<br><br>     M_RETURN(Y)<br>M_FER  <br></font><br></pre><br></td></tr><br></table><br><br>You could do a lot of different things with M_STARTCODE and M_ENDCODE:<br>Profiling on all you functions,<br>Stack back traces on all you memory allocations.  (Would take care of the problem above.) <br>A full backtrace (as far as you want to store) on crashes. <br>Use it to detect excess calls, excess recursion. Etc..<br><br>Of course setting up macros on all your functions is a pain in the ass. I'm thinking of writing a small program to do this automatically.<br>It would be great if my compiler (Borland) would let me define Entry and Exit code for functions, but sadly it doesn't.<br><br>Any one know of a better way to do this?  Are there any problems with my plan?<br><br>PS. Yea I've read over here:  <a target="_blank" href="deadend.html?showThread=Tip-TraceableCallstacks&forum=totd&id==-1#msgmark_7">deadend.html?showThread=Tip-TraceableCallstacks&forum=totd&id==-1#msgmark_7</a><br>And know about imagehlp.lib but I am using Borland. :(<br><br>Thanks,<br>Brian.<br>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=757">Bri</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>19 Sep 2000, 8:26PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193445#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193445#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193445">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by Bri</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-19-2000 - 08:26PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193446">Re: Presenting A Memory Manager</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-20-2000 - 03:39AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193447">
<a name="p193448">
<a name="p193449">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp;<img src="comments_ball.gif"> &nbsp;<font size=2><b>threadsafe?</b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    hi Paul !<br><br>At first i would like to thank you, because i just wanted to write a memory mangager like this (but a bit more simple, i think). Luckily i found your code.<br>Congrats ! This source is great, i found several leaks and bugs with it by now, but i have a little problem with it:<br>It seems, that it behaves a bit funky when using more then one thread. I'm often hitting the 'hash overwrite' assert, when the 2nd thread gets activated (and allocates some mem).<br>If the error lies in my code, then i'm sorry that i bothered you. Perhaps you could add some THREAD_SAFETY #define, and add some EnterCriticalSection()'s. <br><br>Anyway, thanks !<br><br>Timo Heister aka 'shadd'
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=727">shadd</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>20 Sep 2000, 3:28PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193447#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193447#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193447">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>threadsafe?</i></b> <font size=1>by shadd</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-20-2000 - 03:28PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193448">Re: threadsafe?</a> <font size=1>by fluffy</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-20-2000 - 06:46PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193449">Re: threadsafe?</a> <font size=1>by shadd</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>09-21-2000 - 08:13AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193450">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Damn this is good. In my current job, we inherited a whole bunch of legacy code. It had some really cool stuff like a macro named gumby and variables called a**hole. It is also in retained mode. It has a whole bunch of memory leaks. Mmmmmmm.....memory management code. Thank you VERY much. You have made my job a lot easier.
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=151">Alex Taylor</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>03 Oct 2000, 8:32PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193450#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193450#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193450">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193451">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp;<img src="comments_ball.gif"> &nbsp;<font size=2><b>Warning!</b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Your allocator is not thread safe.<br>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=873">bgl</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>07 Oct 2000, 3:45PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193451#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193451#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193451">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193452">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Ahh, so THAT's why some of my threaded code suddenly stopped working when I added the mmgr.  I figured I was just wasn't locking something when I should have been.  The workaround was to make my critical section larger, which fixed it (as far as I can tell).<br><br>Paul, maybe you should put in a (preferrably pthreads-based) mutex in your critical sections.  Something like this should do it:<br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br>#ifdef WIN32<br><font color="#007f00">// do whatever win32 does for critical sections, I honestly don't know and don't care :)</font><br><font color="#007f00">// i.e. define the stuff below as pertains to Win32</font><br>#else<br># include &lt;pthread.h><br><br><font color="#0000ff">static</font> pthread_mutex_t mmgrlock;<br><font color="#0000ff">void</font> InitLock(<font color="#0000ff">void</font>)<br>{<br>    pthread_mutex_init(&scenelock, NULL);<br>}<br><br><font color="#0000ff">void</font> LockMmgr(<font color="#0000ff">void</font>)<br>{<br>    pthread_mutex_lock(&scenelock);<br>}<br><br><font color="#0000ff">void</font> UnlockMmgr(<font color="#0000ff">void</font>)<br>{<br>    pthread_mutex_unlock(&scenelock);<br>}<br><font color="#0000ff">#endif</font><br></font><br></pre><br></td></tr><br></table><br><br>and then add the InitLock(), LockMmgr() and UnlockMmgr() calls wherever appropriate.  Of course, making the code thread-safe would be much nicer, but a spinlock is a close second in terms of happiness.
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=139">fluffy</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>07 Oct 2000, 10:59PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193452#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193452#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193452">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193453">
<a name="p193454">
<a name="p193455">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Hi!<br>I have two problems with your memory manager. I begin with the most embarrasing one as this is the biggest problem. The code that gives me problems is the following:<br><br><br><CPP><br>	void *NewBuf;<br>    <br>    	NewBuf = new CArrayNode<ClassType>[NumNodes + PoolSize - 1];<br>    	if(!NewBuf)<br>      	return -1;<br></CPP><br>I have traced into the overloaded new[] code in you manager and I know the ptr variable returns the right value. The weirdo thing is that my NewBuf variable gets the value of ptr + sizeof(long) or something similar. Let's say that the value of NumNodes is 0 and the value of PoolSize is 1 that would mean we were trying to allocate <br><br>CArrayNode<ClassType>[0];<br><br>Which would be equal to allocating one item of CArrayNode<ClassType>. Note here that the size of CArrayNode<ClassType> is the same as a long. The result is that the data NewBuf points to is deadc0de. NewBuf-1 points to my actual data. If I use <br><br>NewBuf = new CArrayNode<ClassType>;<br><br>Everything works fine. <br><br>I could probably fix my problem by writing<br><br>NewBuf = (new CArrayNode<ClassType>[NumNodes + PoolSize - 1]) - 1;<br><br>But that look dumb and would give me problems if new would return NULL.<br><br>--------<br>My second, a little less stupid me but still stupid me , problem is that I get assertion errors at the line with the following comment:<br><br>// If you hit this assert, you tried to deallocate RAM that wasn't allocated by this memory manager.<br><br>I get this after that my main() function has returned( console app ). My test program only contain one CPP file and I am 100% sure I have put the #include "mmgr.h" line right...<br><br>Thanks in advance for any help you can give.<br>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=837">Brent</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>09 Oct 2000, 2:28PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193453#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193453#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193453">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by Brent</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>10-09-2000 - 02:28PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193454">Re: Presenting A Memory Manager</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>10-10-2000 - 05:57PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193455">Re: Presenting A Memory Manager</a> <font size=1>by Vesa Karvonen</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>10-16-2000 - 12:10PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193456">
<a name="p193457">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Thanks for releasing this Paul!<br><br>I'm using Metrowerks Codewarrior 6 (for windows).<br>I tried using the memory manager in a console app, but mmgr.cpp won't compile. I get this error:<br><br>Error: the file "stdafx.h" cannot be opened<br><br>I also get loads of errors saying new_handler and nh are "undefined identifiers"<br><br>Any ideas?<br><br>Thanks, Nick
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=635">Nimrod</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>21 Oct 2000, 7:19AM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193456#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193456#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193456">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by Nimrod</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>10-21-2000 - 07:19AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193457">Re: Presenting A Memory Manager</a> <font size=1>by MidNight</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>10-21-2000 - 08:28AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193458">
<a name="p193459">
<a name="p193460">
<a name="p193461">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp;<img src="comments_ball.gif"> &nbsp;<font size=2><b>Error in fstream or what?</b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Im getting a rather annoying error when using this manager.<br>Take this simple program compiled under visual c++ v6 (sp4) as a simple console app.<br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br><font color="#0000ff">#define</font> WIN32_LEAN_AND_MEAN<br><font color="#0000ff">#define</font> STRICT<br><font color="#0000ff">#include</font> &lt;fstream.h><br><font color="#0000ff">#include</font> &lt;Other/PaulNettle/mmgr.h><br><font color="#0000ff">int</font> main()<br>{<br>	ifstream file;<br>	<font color="#0000ff">return</font> 0;<br>}<br></font><br></pre><br></td></tr><br></table><br><br>it produces the following 'memory.log' file<br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br>[+] ---->             addr 0x0034B2E8<br>[+] 00002      <font color="#0000ff">new</font> of size 0x00000021(00000033) by ??(00000)::??<br>[+] ---->             addr 0x0034D350<br>[-] -----   <font color="#0000ff">delete</font> of addr 0x003408C8           by ??(00000)::??<br>[!] Request to deallocate RAM that was never allocated<br>[-] -----   <font color="#0000ff">delete</font> of addr 0x0034D350           by ??(00000)::??<br>[-] -----   <font color="#0000ff">delete</font> of addr 0x0034B2E8           by ??(00000)::??<br></font><br></pre><br></td></tr><br></table><br><br>Anyone know why this is happening?<br>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=328">RCV</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>03 Nov 2000, 2:11PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193458#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193458#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193458">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Error in fstream or what?</i></b> <font size=1>by RCV</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>11-03-2000 - 02:11PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193459">Re: Error in fstream or what?</a> <font size=1>by RCV</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>11-03-2000 - 02:26PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193460">Re: Error in fstream or what?</a> <font size=1>by RCV</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>11-03-2000 - 02:55PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193461">Re: Error in fstream or what?</a> <font size=1>by RCV</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>11-05-2000 - 10:14AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193462">
<a name="p193463">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    This code stopped working when i included mmgr.h<br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br>pNewData = (CObject**) <font color="#0000ff">new</font> BYTE[m_nSize * <font color="#0000ff">sizeof</font>(CObject*)];<br></font><br></pre><br></td></tr><br></table><br><br>Error message:<br>error C2440: '=' : cannot convert from 'unsigned char *' to 'class CObject ** '<br>        Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast<br><br><br>Does anybody know why?
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=1183">Imois</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>03 Dec 2000, 12:15PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193462#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193462#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193462">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by Imois</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>12-03-2000 - 12:15PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193463">Re: Presenting A Memory Manager</a> <font size=1>by Von</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>03-25-2003 - 03:07PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193464">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp;<img src="comments_ball.gif"> &nbsp;<font size=2><b>Error in MSVC std::fstream ???</b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    I have similar problem as RCV. I use std::fstream in my engine and when i tried to run it with mmgr, assertion failed (and it seems that error is somewhere in fstream) ... assertion said that there is some delete instead of delete[]. <br><br>so i tried to figure out whats wrong and found that there is something with destruction of std::fstream object if it has been open and closed. <br>so the most simple fragment of code that fails looks liked this:<br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br>m_alwaysLogAll() = <font color="#0000ff">true</font>;<br>{<br>	std::fstream f;<br>	f.open(inifilename);<br>	f.close();<br>}       <font color="#007f00">// !! here it crashes (destruction of fstream is wrong ??)</font><br>m_alwaysLogAll() = <font color="#0000ff">false</font>;<br></font><br></pre><br></td></tr><br></table><br><br>well i tried to take this piece of code and made simple program that looks:<br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br><font color="#0000ff">#include</font> "stdafx.h"<br><font color="#0000ff">#include</font> &lt;fstream><br><font color="#0000ff">#include</font> "../mmgr/mmgr.h"<br><br><font color="#0000ff">int</font> main(<font color="#0000ff">int</font> argc, <font color="#0000ff">char</font>* argv[])<br>{<br>	m_alwaysLogAll() = <font color="#0000ff">true</font>;<br>	{<br>		std::fstream f;<br>		f.open("mmtest.cpp", std::ios_base::in);<br>		f.close();<br>	}<br>	m_alwaysLogAll() = <font color="#0000ff">false</font>;<br>	<font color="#0000ff">return</font> 0;<br>}<br></font><br></pre><br></td></tr><br></table><br><br>now it worked and no crash even leak has obviously occured ... so i thought that there must be something wrong in my engine before it comes to the crash code part ... so i compared the log files<br><br>here they are ... for the first case<br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br>[+] 00004      <font color="#0000ff">new</font> of size 0x00000010(00000016) by ??(00000)::??<br>[+] ---->             addr 0x00A40080<br>[+] 00005      <font color="#0000ff">new</font> of size 0x00000021(00000033) by ??(00000)::??<br>[+] ---->             addr 0x00A40240<br>[+] 00006      <font color="#0000ff">new</font> of size 0x00000021(00000033) by ??(00000)::??<br>[+] ---->             addr 0x00A41D70<br>[-] -----   <font color="#0000ff">delete</font> of addr 0x00A41D70           by ??(00000)::??<br>[-] -----   <font color="#0000ff">delete</font> of addr 0x00A40240           by ??(00000)::??<br>[+] 00007      <font color="#0000ff">new</font> of size 0x00000028(00000040) by ??(00000)::??<br>[+] ---->             addr 0x00A40230<br>[+] 00008      <font color="#0000ff">new</font> of size 0x00000021(00000033) by ??(00000)::??<br>[+] ---->             addr 0x00A41D70<br>[+] 00009      <font color="#0000ff">new</font> of size 0x00000021(00000033) by ??(00000)::??<br>[+] ---->             addr 0x00A41D00<br>[+] 00010      <font color="#0000ff">new</font> of size 0x00000018(00000024) by ??(00000)::??<br>[+] ---->             addr 0x00A41C90<br>[+] 00011      <font color="#0000ff">new</font> of size 0x00000008(00000008) by ??(00000)::??<br>[+] ---->             addr 0x00A41F20<br>[+] 00012      <font color="#0000ff">new</font> of size 0x00000008(00000008) by ??(00000)::??<br>[+] ---->             addr 0x00A41EC0<br>[+] 00013      <font color="#0000ff">new</font> of size 0x00000018(00000024) by ??(00000)::??<br>[+] ---->             addr 0x00A417F0<br>[+] 00014    <font color="#0000ff">new</font>[] of size 0x00000001(00000001) by ??(00000)::??<br>[+] ---->             addr 0x00A417A0<br>[+] 00015    <font color="#0000ff">new</font>[] of size 0x00000006(00000006) by ??(00000)::??<br>[+] ---->             addr 0x00A41740<br>[+] 00016    <font color="#0000ff">new</font>[] of size 0x00000005(00000005) by ??(00000)::??<br>...<br></font><br></pre><br></td></tr><br></table><br><br>and second case (simple program):<br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br>[+] 00003      <font color="#0000ff">new</font> of size 0x00000010(00000016) by ??(00000)::??<br>[+] ---->             addr 0x00490070<br>[+] 00004      <font color="#0000ff">new</font> of size 0x00000021(00000033) by ??(00000)::??<br>[+] ---->             addr 0x00490230<br>[+] 00005      <font color="#0000ff">new</font> of size 0x00000021(00000033) by ??(00000)::??<br>[+] ---->             addr 0x00491FC0<br>[-] -----   <font color="#0000ff">delete</font> of addr 0x00491FC0           by ??(00000)::??<br>[-] -----   <font color="#0000ff">delete</font> of addr 0x00490230           by ??(00000)::??<br>[+] 00006      <font color="#0000ff">new</font> of size 0x00000028(00000040) by ??(00000)::??<br>[+] ---->             addr 0x00490220<br>[+] 00007      <font color="#0000ff">new</font> of size 0x00000021(00000033) by ??(00000)::??<br>[+] ---->             addr 0x00491FC0<br>[+] 00008      <font color="#0000ff">new</font> of size 0x00000021(00000033) by ??(00000)::??<br>[+] ---->             addr 0x00491E30<br>[+] 00009      <font color="#0000ff">new</font> of size 0x00000018(00000024) by ??(00000)::??<br>[+] ---->             addr 0x00491DC0<br>[+] 00010      <font color="#0000ff">new</font> of size 0x00000008(00000008) by ??(00000)::??<br>[+] ---->             addr 0x00491A80<br>[+] 00011      <font color="#0000ff">new</font> of size 0x00000008(00000008) by ??(00000)::??<br>[+] ---->             addr 0x00491A20<br>[+] 00012      <font color="#0000ff">new</font> of size 0x00000018(00000024) by ??(00000)::??<br>[+] ---->             addr 0x004919B0<br>[+] 00013      <font color="#0000ff">new</font> of size 0x00000001(00000001) by ??(00000)::??<br>[+] ---->             addr 0x00491F70<br>[+] 00014      <font color="#0000ff">new</font> of size 0x00000006(00000006) by ??(00000)::??<br>[+] ---->             addr 0x00491950<br>[+] 00015      <font color="#0000ff">new</font> of size 0x00000005(00000005) by ??(00000)::??<br>...<br></font><br></pre><br></td></tr><br></table><br><br>these are only first few lines of the logs ... as you can see they are nearly the same but the last three lines differ in [] ... can anyone explain why ? why in second case the std::ifstream code uses new but when the same code is in my engine source it uses new[] ??<br><br>Is it possible that my engine corrupted memory or did something wrong and caused that behaviour of std::ifstream or mmgr has been changed??<br><br><br>Thanks for any help<br><br>        e4F
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=1187">e4F</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>03 Dec 2000, 11:05PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193464#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193464#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193464">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193465">
<a name="p193466">
<a name="p193467">
<a name="p193468">
<a name="p193469">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp;<img src="comments_ball.gif"> &nbsp;<font size=2><b>Error in strset ?</b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Hi,<br><br>i'm working on a litte engine and for the moment i'm concentrating on image-loading.<br>i have this class gImageFile derived from gFile.<br>i'll post my code right away (i'm sorry for the long post)<br><br>filename is char filename[_MAX_PATH];<br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br>gFile::gFile()<br>{<br>	f = NULL;<br><font color="#007f00">//	memset(filename, 0, _MAX_PATH * sizeof(char));</font><br>	strset(filename , 0);<br>	binary = <font color="#0000ff">false</font>;<br>	write = <font color="#0000ff">false</font>;<br>	read = <font color="#0000ff">false</font>;<br>}<br><br>gImageFile::gImageFile()<br>{<br>	<font color="#0000ff">this</font>->image = NULL;<br>}<br><br>first some data:<br><br><font color="#0000ff">sizeof</font>(gImageFile) = 280<br><font color="#0000ff">sizeof</font>(filename) = 260<br><br></font><br></pre><br></td></tr><br></table><br><br>when i create a new gImageFile object, (with new),<br>it loads (for ex.) at 0x027c9e54 (last time i ran my program)<br>filename has address 0x027c9e5c. here is a memory-dump:<br><br>address   <br>027C9E48  0000003F  FDFDFDFD  BAADF00D  <-starts here<br>027C9E54  00443130  FEEDFACE  FEEDFACE  <br>027C9E60  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9E6C  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9E78  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9E84  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9E90  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9E9C  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9EA8  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9EB4  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9EC0  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9ECC  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9ED8  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9EE4  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9EF0  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9EFC  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9F08  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9F14  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9F20  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9F2C  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9F38  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9F44  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9F50  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9F5C  FEEDFACE  FEEDFACE  FEEDFACE  <br>027C9F68  FEEDFACE  DEADC0DE  FDFDFDFD <- ends here<br>027C9F74  BAADF00D  BAADF00D  BAADF00D  <br>027C9F80  ABABABAB  ABABABAB  00000000<br><br>Now, if i use strset(filename), everything from address 0x027c9e5c -><br>0x027c9f84 is set to 0, which is 296 bytes! Ofcourse DEADC0DE is overwritten and luckily the mem-manager detected this.<br><br>If i use memset(filename, _MAX_PATH * sizeof(char)) 0x027c9e5c -> 0x027c968 is set to 0 as it should.<br><br>The bizar thing is (if not already), when i put the three statements(see gFile constructor) <br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br>	binary = <font color="#0000ff">false</font>;<br>	write = <font color="#0000ff">false</font>;<br>	read = <font color="#0000ff">false</font>;<br></font><br></pre><br></td></tr><br></table><br>in FRONT of strset(filename), everything works fine. (binary, write, read are all bool's at address 0x027c9f60, 0x027c9f61, 0x027c9f62 respectively, thus right after filename.<br><br>It took me a hell of a long time to find out what was wrong!<br>Thanks Paul for your mem-manager, without it i would never have found this. Sure, the MS-debug library found that memory was currupted, but that's all.<br><br>Is there any explanation for this ?<br><br>BTW, is this really a bug? would the program crash if i leave it like this? If i run the program in Release-mode, everything works fine.<br><br>thanks for reading (and replying)<br><br>Sven<br>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=1356">Sven</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>30 Dec 2000, 12:08PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193465#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193465#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193465">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Error in strset ?</i></b> <font size=1>by Sven</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>12-30-2000 - 12:08PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193466">Re: Error in strset ?</a> <font size=1>by Nick</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>12-30-2000 - 01:12PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193467">Re: Error in strset ?</a> <font size=1>by Sven</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>12-31-2000 - 06:35AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193468">Re: Error in strset ?</a> <font size=1>by Nick</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>12-31-2000 - 10:31AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193469">Re: Error in strset ?</a> <font size=1>by Sven</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>01-01-2001 - 06:23PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193470">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    I always get 4 x Request to deallocate RAM that was never allocated<br>Where does that come from? I don't even use new or delete..
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=475">Caereth</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>06 Feb 2001, 1:57PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193470#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193470#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193470">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193471">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    OK, well I'm having problems.  After using auxDIBImageLoad(), I'm supposed to do free(img->data); and free(img); ... but because this wasn't allocated by the memory mangager, I get problems.  How can I temporarily "turn it off" for this?<br>Thanks<br><br>-Kieren
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=2728">Kieren Johnstone</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>26 Jul 2001, 6:26AM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193471#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193471#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193471">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193472">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Hi Paul,<br><br>Your calloc macro seems to be wrong. It should be defined as:<br><br>void *calloc(size_t nelem, size_t elsize);<br><br>but it seems to be missing the elsize bit, unless I have missed something :)<br><br>Adding your mmgr headers broke some C code I had, because it was using calloc.<br><br>Cheers,<br><br>Rhys Hill
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=3327">Rhys Hill</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>09 Oct 2001, 9:31PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193472#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193472#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193472">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193473">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    #define new<br>will screw up placement new, don't do it.<br><br>Kevin
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=1810">kevbru</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>09 Oct 2001, 11:39PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193473#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193473#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193473">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193474">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    ok, so I was able to (sorta) track down where a memory leak has occurred in my program but I'm having trouble figuring out WHAT is causing it. When I include your file into my project it compiles fine but when I exit my program I get a nasty application error and thats it. My program runs fine if i comment out your header though. <br><br>Am I doing something wrong?...
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=3439">ctrl-alt-del</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>30 Oct 2001, 4:57PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193474#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193474#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193474">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193475">
<a name="p193476">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    What about a memory manager for the C users?<br><br>C++ is all well and good and all, but I still use C (don't have a need to move over to C++).
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=2479">NitroGL</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>03 Jan 2002, 12:52PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193475#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193475#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193475">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by NitroGL</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>01-03-2002 - 12:52PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193476">Re: Presenting A Memory Manager</a> <font size=1>by Jaap Suter</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>01-03-2002 - 12:58PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193477">
<a name="p193478">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Thanks Midnight! i was using a leak catcher but its crap compared to this one.  just a few quick questions to anyone who may know..<br><br>Ive included the .cpp and header files into my project (new/delete heavy neural net demo) but im a bit lost at to what to do next.  Ive done m_dumpMemoryReport(); at the exit of main() to give me a memory report that says "Congrats, no leaks found". Have i really got no leaks, or do i need to do something else aswell to detect them?. My other log files have a lot of question marks in them "??", is that bad?<br><br>thanks.
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=3196">gibber</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>03 Jan 2002, 2:16PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193477#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193477#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193477">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by gibber</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>01-03-2002 - 02:16PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193478">Re: Presenting A Memory Manager</a> <font size=1>by Max</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>01-03-2002 - 02:37PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193479">
<a name="p193480">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    I just compared this memmgr with my own, and i found 2 flaws in yours, both in the log function.<br><br>a) is the output string guaranteed to be always < 2048 bytes? I used to use _vsnprintf to avoid buffer overflows; but IIRC, _vsnprinf is M$-specific.<br><br>b) since the log file is opened in append mode, using a relative file path, the log may spread over several files in different directories, if the application changes the working directory.
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=1131">BlindSheep</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>06 Feb 2002, 3:02PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193479#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193479#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193479">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by BlindSheep</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>02-06-2002 - 03:02PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193480">Re: Presenting A Memory Manager</a> <font size=1>by michael</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>08-18-2002 - 09:13AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193481">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    I've just downloaded this and if I create a noddy file:<br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br><font color="#007f00">// Note no stdafx at the top ; just plain vanilla.</font><br><font color="#0000ff">#include</font> &lt;iostream><br><font color="#0000ff">#include</font> &lt;stdio.h><br><font color="#0000ff">#include</font> &lt;stdlib.h><br><font color="#0000ff">#include</font> &lt;assert.h><br><font color="#0000ff">#include</font> &lt;string.h><br><font color="#0000ff">#include</font> &lt;time.h><br><font color="#0000ff">#include</font> &lt;stdarg.h><br><font color="#0000ff">#include</font> &lt;<font color="#0000ff">new</font>><br><br><font color="#0000ff">#ifndef</font>	WIN32<br><font color="#0000ff">#include</font> &lt;unistd.h><br><font color="#0000ff">#endif</font><br><br><font color="#0000ff">#include</font> "mmgr.h"<br></font><br></pre><br></td></tr><br></table><br><br>then I get the errors<br><br>mmgr.h(142) : error C2373: 'new' : redefinition; different type modifiers see declaration of 'new'<br>mmgr.h(146) : error C2373: 'delete' : redefinition; different type modifiers see declaration of 'delete'<br><br>I'm using VC6 sp5.<br><br>Ben
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=1293">bwalmisley</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>28 Feb 2002, 4:53AM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193481#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193481#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193481">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193482">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Ok, I know, this is a very old thread, but...... <br><br>I've just tried this piece of code, and it seems very usefull. However, I wonder if the calloc-macro is defined wrong, since the calloc-function takes two parameters and the macro only takes one. Is the implementation of calloc diffrent from compiler to compiler, or is this a "bug" in Midnights code ?
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=3667">Stle</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>09 Aug 2002, 5:43AM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193482#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193482#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193482">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193483">
<a name="p193484">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Hi there!<br><br>Besides the fact, that mmgr is a great piece of software, I suffer from a similar problem as e4F and RCV do. This small app crashes at destruction of the ofstream object:<br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br><font color="#0000ff">#include</font> &lt;fstream><br><font color="#0000ff">#include</font> "mmgr.h"<br><br><font color="#0000ff">int</font> main(<font color="#0000ff">void</font>)<br>{<br>	std::ofstream f("test.txt");<br>	f &lt;&lt; 16;<br>	f.close();<br>	<font color="#0000ff">return</font> 0;<br>}<br></font><br></pre><br></td></tr><br></table><br><br>I recently wrote an email to Paul concerning this, but got no answer yet. <br>This is what I found out: at destruction time, I hit an assert (mismatching allocation/deallocation type (line 1456 of mmgr.cpp). The callstack is:<br>m_deallocator(const char * 0x0047a0ac `string', const unsigned int 0, const char * 0x0047a0ac `string', const unsigned int 6, const void * 0x0075b960) line 1456 + 103 bytes<br>operator delete(void * 0x0075b960) line 996 + 37 bytes<br>std::_Mpunct&lt;unsigned short>::~_Mpunct&lt;unsigned short>() line 60 + 36 bytes<br>std::moneypunct&lt;unsigned short,1>::~moneypunct&lt;unsigned short,1>() + 15 bytes<br>std::moneypunct&lt;unsigned short,1>::`scalar deleting destructor'(unsigned int 1) + 15 bytes<br>std::locale::_Locimp::~_Locimp() line 84 + 44 bytes<br>std::locale::_Locimp::`scalar deleting destructor'(unsigned int 1) + 15 bytes<br>std::locale::~locale() line 105 + 39 bytes<br>std::basic_filebuf&lt;char,std::char_traits&lt;char> >::~basic_filebuf&lt;char,std::char_traits&lt;char> >() line 78 + 58 bytes<br>std::basic_ofstream&lt;char,std::char_traits&lt;char> >::~basic_ofstream&lt;char,std::char_traits&lt;char> >() line 305 + 88 bytes<br>std::basic_ofstream&lt;char,std::char_traits&lt;char> >::`vbase destructor'() + 40 bytes<br>main() line 43 + 28 bytes<br>mainCRTStartup() line 206 + 25 bytes<br>KERNEL32! bff8b560()<br>KERNEL32! bff8b412()<br>KERNEL32! bff89dd5()<br><br>So the error actually happens in "xlocmon" (part of the microsoft STL shipped with Visual C++ 6) at line 60, which says: delete[] _Mgr;<br>Although it is obviuos that operator delete[] has to be called, only operator delete is called (_Mgr is allocated with new[] in line 218 of "xlocale"). Can anybody explain why the operator is incorrectly linked and how I can avoid this error.<br><br>Thanks in advance.<br><br>VizOne<br><br>----<br>Please excuse any errors within the text, English is not my native language.<br>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=6021">VizOne</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>15 Nov 2002, 4:33AM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193483#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193483#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193483">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<center><table width="100%" bgcolor="#000000" border=0 cellspacing=1 cellpadding=1>
  <tr> 
   <td width="100%" valign="center">
<table width="100%" bgcolor="#000000" border=0 cellspacing=2 cellpadding=1>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp;<img src="comments_ball_blue3.gif"> <b><i>Re: Presenting A Memory Manager</i></b> <font size=1>by VizOne</font></font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>11-15-2002 - 04:33AM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font face="Verdana, Helvetica" size=2> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a class="menulink" href="deadend.html?thread_show=23892&msg=193484">Re: Presenting A Memory Manager</a> <font size=1>by zppz</font> </font></td><td width="15%" bgcolor="#133338"><font color="#fadd69" face="Arial, Helvetica, Verdana" size=1><center>12-14-2002 - 12:59PM</center></font></td></tr>
<tr><td bgcolor="#222739" width="85%"><font size=1>&nbsp;</font></td><td width="15%" bgcolor="#133338"><font size=1>&nbsp;</font></td></tr>
</table>
</font>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">
&nbsp;</td>
</tr>
</table></center>

<font size=1><br></font>
<center>
<a name="p193485">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Hi All,<br><br>	I use the Memory manager and removed all memory leaks from my code, but yesterday I had a little problem with it and still don't know how to solve it:<br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br>	p = <font color="#0000ff">new</font> box[10];<br>	<font color="#0000ff">delete</font>[](p);<br></font><br></pre><br></td></tr><br></table><br>	If I trace the new[] overloaded funcion in mmgr.cpp, if returns a pointer to 0x0b228820, that's the addrress in the line "return ptr;" of the mmrg.cpp, one line after, "p" have the address 0x0b228824, just +4<br><br>	In the "delete[](p)" I take the assert:<br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><br>	<font color="#007f00">// If you hit this assert, you tried to deallocate RAM that wasn't allocated by this memory manager.</font><br></font><br></pre><br></td></tr><br></table><br><br>	All the weekend stuck at this pice of code ... could anyone point me a solution?<br><br>Thanks you so much!<br>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=6429">Ricard</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>19 Jan 2003, 11:59AM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193485#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193485#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193485">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193486">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    I'd love to use this manager but it doesn't appear to be able to work with fstream!<br><br>When I declare an ifstream object:<br><br>ifstream* data = new ifstream();<br><br>And try to delete it:<br><br>delete data;<br><br>It crashes!  Because the memory manager complains that we're trying to delete unallocated space...<br><br>Any ideas?
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=5673">n e X i u s</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>04 Mar 2003, 2:45PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193486#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193486#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193486">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193487">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    First I want to say, WOW!!  The memory manager is brilliant, and very very clever!  Thank you! (I already solved two small memory leaks ;) )<br><br>I have been using the it and I like it very well, but there is a little problem...<br><br>When I use ifstream, ifstream allocates memory by itself, and this allocation is not performed by the memory manager...  Well, that's okay anyway, because ifstream deallocates the memory automatically afterwards, anyway...  But the problem is that when I return from the function and it calls ifstream's destructor, the memory manager takes care of the deletion!  And it doesn't even know that the memory was allocated!<br><br>Can you please find a solution to this problem!<br>I enjoy using the memory manager, because ir is very helpful, but it looks like I can't because I need to use ifstream...
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=6921">James Trotter</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>13 Apr 2003, 11:16AM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193487#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193487#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193487">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193488">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    As promised heres my testimonial.<br><br>This thing rocks! =)<br><br>I had a bug in my code that was causing the application to intermittently crash. I did some checking around and the code I thought was the culprit, looked correct (Turns out it was). The application is a multithreaded network server so I couldnt tell if the crash was a result of race conditions with the threads or what. <br><br>I eventually tracked it down to crashing on the return from a destructor. Which meant I was probably overwriting memory somewhere when I shouldn't be. Tracking it down was gonna be a small pain, but then I remembered about Pauls memory manager and decided to give it try. Well after about 10 minutes of including the manager and making the necessary include modifications, it located my problem!<br><br>Remember how I thought I was corrupting memory somewhere? Sure enough I was, I had been allocating a buffer and doing a memset on it to get it ready for use. I was however, calling memset with a size 4 bytes bigger than the size of the buffer. Oops! =)<br><br>After fixing that problem, my application quit crashing and I was a happy coder. It also pointed about about 10 memory leaks of which I was aware of, but just hadn't gotten around to fixing. The memory manager told me exactly where I was allocating the memory and made the job easy of tieing up the loose ends.<br><br>A big thanks goes out to Paul for releasing such a wonderful piece of code. <br><br>-=[ Megahertz ]=-
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=196">Megahertz</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>08 May 2003, 11:34PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193488#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193488#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193488">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193489">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    I know this is an old thread, but I'm having a couple of problems using the memory manager in my Linux application.<br><br>1)<br><br>I can't determine which include file to use for "new". If I use <br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><font color="#0000ff">#include</font> &lt;new.h><br></font><br></pre><br></td></tr><br></table><br><br>I get a warning:<br><br>/usr/include/c++/3.2.2/backward/backward_warning.h:32:2: warning: #warning This file includes at least one deprecated or antiquated header. Please consider using one of the 32 headers found in section 17.4.1.2 of the C++ standard. Examples include substituting the &lt;X> header for the &lt;X.h> header for C++ includes, or &lt;sstream> instead of the deprecated header &lt;strstream.h>. To disable this warning use -Wno-deprecated.<br><br>I can't find an alternative new.h on my Mdk 9.1 box for g++ 3.2.2.<br><br>2)<br><br>If I ignore the above warnings, I then have the following errors:<br><br><table width="100%" cellspacing=0 cellpadding=15 border=2><tr><td bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000">In file included from mmgr.cpp:82:<br>/home/mike/Development/Habitat_005a/Habitat/include/core/mmgr.h:142: <font color="#0000ff">declaration</font> of `void* <font color="#0000ff">operator</font> <font color="#0000ff">new</font>(<font color="#0000ff">unsigned</font> <font color="#0000ff">int</font>)' throws<br>different exceptions<br>/usr/include/c++/3.2.2/new:79: than previous <font color="#0000ff">declaration</font> `void* <font color="#0000ff">operator</font> <font color="#0000ff">new</font>(<font color="#0000ff">unsigned</font> <font color="#0000ff">int</font>) <font color="#0000ff">throw</font> (std::bad_alloc)'<br>/home/mike/Development/Habitat_005a/Habitat/include/core/mmgr.h:143: <font color="#0000ff">declaration</font> of `void* <font color="#0000ff">operator</font> <font color="#0000ff">new</font> [](<font color="#0000ff">unsigned</font> <font color="#0000ff">int</font>)' throws different exceptions<br>/usr/include/c++/3.2.2/new:80: than previous <font color="#0000ff">declaration</font> `void* <font color="#0000ff">operator</font> <font color="#0000ff">new</font> [](<font color="#0000ff">unsigned</font> <font color="#0000ff">int</font>) <font color="#0000ff">throw</font> (std::bad_alloc)'<br>/home/mike/Development/Habitat_005a/Habitat/include/core/mmgr.h:146: <font color="#0000ff">declaration</font> of `void <font color="#0000ff">operator</font> <font color="#0000ff">delete</font>(<font color="#0000ff">void</font>*)' throws different exceptions<br>/usr/include/c++/3.2.2/new:81: than previous <font color="#0000ff">declaration</font> `void <font color="#0000ff">operator</font> <font color="#0000ff">delete</font>(<font color="#0000ff">void</font>*) <font color="#0000ff">throw</font> ()'<br>/home/mike/Development/Habitat_005a/Habitat/include/core/mmgr.h:147: <font color="#0000ff">declaration</font> of `void <font color="#0000ff">operator</font> <font color="#0000ff">delete</font> [](<font color="#0000ff">void</font>*)' throws different exceptions<br>/usr/include/c++/3.2.2/new:82: than previous <font color="#0000ff">declaration</font> `void <font color="#0000ff">operator</font> <font color="#0000ff">delete</font> [](<font color="#0000ff">void</font>*) <font color="#0000ff">throw</font> ()'<br></font><br></pre><br></td></tr><br></table><br><br>I don't know how to fix this. Any help in resolving this is greatly appreciated.<br><br>Thanks
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=2641">stodge</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>08 Jun 2003, 3:41PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193489#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193489#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193489">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193490">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    <br>I have one question about this, and its a super-dumb question.  I haven't used operators new, delete or functions malloc/realloc etc. since I discovered STL and smart pointers.  I am assuming I don't need to use this (of course!) - or will it integrate with STL (which I believe calls these operators)?<br><br>I am going to run it against an old (but still in use) project of mine at work next week anyway.<br><br>
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=5044">_Robbo_</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>08 Jun 2003, 4:25PM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193490#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193490#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193490">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>
<a name="p193491">

<table cellspacing=0 cellpadding=2 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center">
       <font face="Verdana, Tahoma, Verdana" size=2 color="#c0d0f0">&nbsp; &nbsp;<font size=2><b></b> </font></font>
   </td>
</tr>
</table>
<table width="100%" border=0 cellspacing=1 cellpadding=1 style="table-layout:fixed;">
  <tr> 
   <td width="85%" valign="center" bgcolor="#222739">

<table width="98%" border=0 cellspacing=1 cellpadding=12 style="table-layout:fixed;"><tr><td>
<font face="Verdana, Tahoma, Helvetica" size=2 color="#fadd69">
    Hello. Good job on this one Paul.<br>Although i have a question:<br>As far as the "new" operators are overloaded, maybe the "delete" operators should be overloaded as well so the memory allocated frees if an exception is thrown during the "new" proccess?<br><br>Cheers<br>Phornee
</font>
</td></tr>
</table>

   </td>
   <td width="15%" valign="top" bgcolor="#133338">
   <table width="98%" border=0 cellspacing=1 cellpadding=12><tr><td>
<font size=2 color="#fadd69">
<center>
<b><font face="Tahoma, Verdana" size=2>

<a class="menulink" href="deadend.html?account_info=7892">Ismael</a></font></b>
<font face="Tahoma" color="#ffffff" size=1>
<br>

<font face="Helvetica, Arial, Verdana" color="#ffffff" size=1>03 Oct 2003, 4:40AM</font><br>
</font></td></tr>
</table>
   </td>
  </tr>
</table>
<table cellspacing=0 cellpadding=1 border=0 width="100%" style="table-layout:fixed;">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center" align="right">

<table width="100%" cellspacing=0 cellpadding=0 border=0>
<tr>
  <td width="85%" valign="center">
  <table cellspacing=3 cellpadding=0>
<tr><td></td>
  
  </tr>
</table>
  </td>
  <td width="15%" valign="center"><center>

<center>
<table width="90%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td><img src="arrow-left-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg=193491#postform">reply</a></font></td>
<td><img src="arrow-up-blue-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?thread_show=23892&msg_quote=193491#postform">quote</a></font></td>
<td><img src="colorbars-g.gif"></td><td><font face="Tahoma, Helvetica" size=1><a class="menulink" href="deadend.html?alertmsg=193491">alert</a></font></td>
</tr></table>
</center>
</center></td>
</tr>
</table>

   </td>
</tr>
</table>
</center>
<br><center>

<br>
<table cellspacing=0 cellpadding=16 border=1 width="98%">
<tr>
   <td><font face="Verdana, Helvetica, Arial" size=2 color="#ffffff">
If you'd like to participate in our forum discussions, you must first create and authorize an account on flipcode.
The account creation process is completely free of charge
and entirely painless.  It can be done via the <a href="deadend.html"><b>Account Manager</b></a>.
Be sure to read our user <A href="deadend.html">guidelines</a> as well.
   </font></td>
</tr>
</table>



<br> <center><font face="Helvetica,Tahoma,Verdana" color="#ffffff" size=1>Copyright 1999-2006 (C) FLIPCODE.COM, INC.  All rights reserved.</font> <font face="Helvetica,Tahoma,Verdana" size=1>Please read our <a href="terms.shtml">Terms</a>, <a href="terms.shtml">Conditions</a>, and <a href="terms.shtml">Privacy information</a>.</font></center></body></html><br><br>