<html>
<head><title>flipcode - Compiler Directives</title>
<style type="text/css">


a.menulink:link    {color: #b9ffd0; }
a.menulink:visited {color: #b9ffd0; }
a.menulink:active  {color: #b9ffd0; }

a.menulinkempty:link    {color: #b9ffd0; }
a.menulinkempty:visited {color: #b9ffd0; }
a.menulinkempty:active  {color: #b9ffd0; }
a.menulinkempty:link, a.menulinkempty:visited, a.menulinkempty:active {text-decoration: none}

a.orangelink:link    { color:#FFAB04; }
a.orangelink:visited { color:#FFAB04; }
a.orangelink:active  { color:#FFAB04; }

a.palegreen:link    {color: #b9ffd0; }
a.palegreen:visited {color: #b9ffd0; }
a.palegreen:active  {color: #b9ffd0; }

a.bluelink:link    { color:#03F0FF; }
a.bluelink:visited { color:#03F0FF; }
a.bluelink:active  { color:#03F0FF; }

a.softyellow:link     { color:#FFFCA9; }
a.softyellow:visited  { color:#FFFCA9; }
a.softyellow:active   { color:#FFFCA9; }

a.nounderline:link        {color: #FFFCA9; }
a.nounderline:visited     {color: #FFFCA9; }
a.nounderline:active      {color: #FFFCA9; }
a.nounderline:link, a.nounderline:visited, a.nounderline:active {text-decoration: none}

<!--
#code_comment { font-family:Courier,Courier New; font-size:12px; color:#007f00; }
#code_text    { font-family:Courier,Courier New; font-size:12px; color:#000000; }
#code_keyword { font-family:Courier,Courier New; font-size:12px; color:#0000FF; }
-->

</style>
</head>
<body bgcolor="#000000" text="#ffffff" link="#FFFCA9" vlink="#FFFCA9" alink="#FFFCA9">

<center>

<table cellspacing=0 cellpadding=0 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center"><font size=1>&nbsp;</font></td>
</tr>
</table>

<table width="100%" cellspacing=12 cellpadding=0 border=0><tr>
<td width="49%" bgcolor="#000000" valign="center"><a href="deadend.html"><img border=0 src="fcc.png"></a></td>
<td width="49%" bgcolor="#000000" valign="center" align="right">
</td>
</tr>
</table>


</td></tr></table>

<table cellspacing=0 cellpadding=0 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center"><font size=1>&nbsp;</font></td>
</tr>
</table>


<table width="100%" cellspacing=0 cellpadding=0 border=0><tr>
<td width="160" bgcolor="#303030" valign="top">



<img src="rm-stilt.gif"></td>


<td width="100%" bgcolor="#000000" valign="top">
<font face="Tahoma, Helvetica, Verdana" size=1>

<font face="Verdana,Helvetica" color="#ffffff" size=2><br>
<br>
<center>
<table width="94%" cellspacing=0 cellpadding=0 border=0>
<tr>
<td>
<font size=3 face="Verdana, Helvetica" color="#ffffff"><b>Compiler Directives</b><br>
<font size=2>Question submitted by <!--GO AWAY SPAM!!!--><script language="javascript">document.write('<a href=\"mailto:' +  '' + '' + ''    
+''    
+''    
+''    
+ 'jbryant' + ''    
+''    
+''    
+''    
+''    
+''    
+ '@' + 'premisesystems' + ''    
+''    
+ '.' + ''    
+''    
+''    
+''    
+''    
+''    
+ 'com\">' + 'James Bryant' + '</a>')</script> (21 August 2000)</font><br>
<font size=1><br><img src="line_grey.png"><br><br></font><br>
</font>

</td></tr></table>
</center><center>
<table width="98%" border=0 cellspacing=0 cellpadding=0>
<tr>
<td><img src="bborder_topleft.png"></td>
<td width="100%" background="bborder_topmiddle.png">&nbsp;</td>
<td><img src="bborder_topright.png"></td>
</tr>
<tr>
<td background="bborder_left.png">&nbsp;</td>
<td width="100%">
<font face="Verdana,Helvetica" color="#ffffcc" size=2>

Was wondering if you knew of a compiler directive such as __FILE__ or __LINE__ which inserts
the string name of the current class or 
function name?  Or if there is another way to get this data?  I want to use this functionality
for file logging.  I have searched MSDN, the net, and newsgroups and haven't found anything, thanks.<br><br>James Bryant 
</font>

</td>
<td background="bborder_right.png">&nbsp;</td>
</tr>
<tr>
<td><img src="bborder_botleft.png"></td>
<td width="100%" background="bborder_botmiddle.png">&nbsp;</td>
<td><img src="bborder_botright.png"></td>
</tr>
</table>
<br>
<center>

<center>
<table width="98%" border=0 cellspacing=0 cellpadding=0>
<tr>
<td><img src="bborder_topleft-a.png"></td>
<td width="100%" background="bborder_topmiddle.png">&nbsp;</td>
<td><img src="bborder_topright.png"></td>
</tr>
<tr>
<td background="bborder_left.png">&nbsp;</td>
<td width="100%">
<font face="Verdana,Helvetica" color="#BFFFE5" size=2>
All the GNU compilers on my Linux boxes (including EGCS) support the
__FUNCTION__ variable which is just what you want: a string that contains the
current function name. The WATCOM compiler also supports __FUNCTION__.<br><br>Unfortunately, you can't check for the existence of __FUNCTION__ using #ifdef,
because (at least in GNU) it's not a preprocessor macro.<br><br>Using __FUNCTION__ within a class member (as in "MyClass::MyMemberFunction")
will only result in the raw function name ("MyMemberFunction"), not the
<I>class::function</I> name. Under the GNU compilers, you can use
__PRETTY_FUNCTION__ to get something even better. In this case, the result would
be something like "bool MyClass::MyMemberFunction(int, int)". If you're really
anal, you could parse the class name out of this, but why bother?<br><br>As for a __CLASS__ (or similar) compiler-defined variable, I've never seen one
in any compiler. However, it wouldn't be difficult to define your own for each
class:<br><br><center><div style="width:100%; overflow:auto; background-color:#FFFFFF; border:solid 1px #c0c0c0;"><table width="100%" bgcolor="#ffffff" cellspacing=0 cellpadding=12 border=0><tr><td width="100%" bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000">
<font color="#0000ff">class</font>    MyClass
{
            <font color="#007f00">// Yada, yada, yada.
</font>
<font color="#0000ff">private</font>:
<font color="#0000ff">static</font>    <font color="#0000ff">const</font> <font color="#0000ff">char</font> <font color="#0000ff">const</font> *__CLASS__ = "MyClass";
};
 </font></pre></td></tr></table></div></center><br><br>This only declares the variable, you still need to define it in your
implementation file:<br><br><center><div style="width:100%; overflow:auto; background-color:#FFFFFF; border:solid 1px #c0c0c0;"><table width="100%" bgcolor="#ffffff" cellspacing=0 cellpadding=12 border=0><tr><td width="100%" bgcolor="#ffffff"><pre><font face="Courier, Courier New" color="#000000"><font color="#0000ff">const</font> <font color="#0000ff">char</font> <font color="#0000ff">const</font> *MyClass::__CLASS__; </font></pre></td></tr></table></div></center><br><br>I'm prone to making a lot of mistakes, and this is something I'm likely to
forget. Fortunately, in this case if you forget to include this in a class, your
compiler will let you know. If you use template files for new classes, this is
something that would go nicely in those template files.<br><br>Since you're using this for file logging, you've probably got some macros that
take advantage of this data. In this case, you'll want to use the __CLASS__
variable anywhere. So you might also want to declare a global __CLASS__ variable
with the contents "Global scope" or even just an empty string. But be careful,
doing this means that your compiler will no longer warn you if you forget to
declare __CLASS__ within your class.<br><br>Getting back to the __FUNCTION__, I've only been able to get past this missing
variable by actually declaring it at the beginning of every single function.
This is a very big hassle, and because of this, I only did this for one project.
I've never done it since. Instead, I use a logger class that I included recently
as a <link>COTD entry<link>, which uses indentation in the log files to help
outline the flow of code from function call to function call (see the LOGFUNC
macro). This is an optional thing, and I only use it when I need it. This is
something you might consider doing, because it's much less hassle.
<br>
<font size=1><br><img src="line_grey.png"><br><br></font>
<font color="#ffffff">Response provided by <b>Paul Nettle</b></font>
</font>
</td>
<td background="bborder_right.png">&nbsp;</td>
</tr>
<tr>
<td><img src="bborder_botleft.png"></td>
<td width="100%" background="bborder_botmiddle.png">&nbsp;</td>
<td><img src="bborder_botright.png"></td>
</tr>
</table><br>This article was originally an entry in flipCode's <i>Ask Midnight</i>, a Question and Answer column with Paul Nettle that's no longer active.
<center>

</td>



</tr>
</table>

<table cellspacing=0 cellpadding=0 border=0 width="100%">
<tr>
   <td background="comments_bar2.jpg" bgcolor="#333333" width="100%" valign="center"><font size=1>&nbsp;</font></td>
</tr>
</table>
</center>

<br>
<center><font face="Arial, Helvetica" size=1> </font></center>

<br><br>



<font face="Verdana,Helvetica" color="#ffffff" size=2><b>Community Feedback:</b><br><br></font><center><font face="Verdana,Helvetica" color="#ffffff" size=2>No comments have been posted yet.</font></center> <center><font face="Helvetica,Tahoma,Verdana" color="#ffffff" size=1>Copyright 1999-2006 (C) FLIPCODE.COM, INC.  All rights reserved.</font> <font face="Helvetica,Tahoma,Verdana" size=1>Please read our <a href="terms.shtml">Terms</a>, <a href="terms.shtml">Conditions</a>, and <a href="terms.shtml">Privacy information</a>.</font></center></body></html><br><br>